<c-row ngPreserveWhitespaces>
  <c-col xs="12">
    <c-card class="mb-4">
      <c-card-header>
        <strong>Formulario con Autoguardado</strong>
      </c-card-header>
      <c-card-body>
        @if (savedMessage) {
          <div class="alert alert-info mb-3" role="alert">
            <strong>{{ savedMessage }}</strong>
          </div>
        }
        
        <form [formGroup]="form" (ngSubmit)="onSubmit()" cForm>
          <div class="mb-3">
            <label cLabel for="email">Email address</label>
            <input 
              formControlName="email"
              cFormControl
              id="email"
              placeholder="name@example.com"
              type="email"
              [class.is-invalid]="form.get('email')?.invalid && form.get('email')?.touched"
            />
            @if (form.get('email')?.invalid && form.get('email')?.touched) {
              <div class="invalid-feedback">
                Por favor ingresa un email válido
              </div>
            }
          </div>
          
          <div class="mb-3">
            <label cLabel for="textarea">Example textarea</label>
            <textarea 
              formControlName="textarea"
              cFormControl 
              id="textarea" 
              rows="3"
              placeholder="Escribe algo aquí..."
            ></textarea>
          </div>
          
          <div class="mb-3">
            <label cLabel for="favoriteColor">Color favorito</label>
            <input 
              formControlName="favoriteColor"
              cFormControl
              id="favoriteColor"
              type="color"
            />
            <div class="mt-2">
              <div 
                [ngStyle]="{'backgroundColor': form.get('favoriteColor')?.value}" 
                class="color-box p-2 m-1 d-inline-block"
                style="width: 50px; height: 50px; border: 1px solid #ccc;"
              ></div>
              <strong class="ms-2">{{ form.get('favoriteColor')?.value }}</strong>
            </div>
          </div>
          
          <div class="mb-3">
            <button 
              cButton 
              color="primary" 
              type="submit"
              [disabled]="form.invalid"
            >
              Enviar
            </button>
            <button 
              cButton 
              color="secondary" 
              type="button"
              class="ms-2"
              (click)="onClearSaved()"
            >
              Limpiar datos guardados
            </button>
          </div>
        </form>
        
        <div class="mt-3">
          <small class="text-muted">
            <strong>Nota:</strong> Los datos se guardan automáticamente en localStorage 
            después de 1 segundo de inactividad. Si recargas la página, los datos se restaurarán automáticamente.
          </small>
        </div>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>






